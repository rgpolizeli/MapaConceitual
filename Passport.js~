
/*
 * Exporto apenas o passport
 * nao consegui fazer a classe Passport, pois deve haver algum problema  quando o module.exports tenta anexar a funcao, retornando vazio
 * possivelmente o problema esta com passport.use

var passport = require('passport');
var localStrategy = require('passport-local').Strategy;
var connection;

exports.iniciar = function iniciar(conexao){
	
	connection = conexao;
	return exports;

}

var bb = function(e,p, connection,done){
		connection.query('SELECT email FROM user WHERE email = ?',[e], function(err, result) {
			console.log(result[0].email);		
			if(err) 
				return done(err, false);
			else 
				return done(null, result[0].email);
		});	
};


passport.use('local',new localStrategy(
	{
		usernameField: 'email',
		passwordField: 'password'    
	},
	function(email,password,done) {
		var user = password;
		user = bb(email,password,connection,done);		
	}
));


exports = passport;
*/


/*
function Passport(connection){
	
	var ppt = require('passport');
	var localStrategy = require('passport-local').Strategy;
	this.passport;
	
	var bb = function(e,p, connection,done){
			connection.query('SELECT email FROM user WHERE email = ?',[e], function(err, result) {
				console.log(result[0].email);		
				if(err) 
					return done(err, false);
				else 
					return done(null, result[0].email);
			});	
	};
	
	ppt.use('local',new localStrategy(
		{
			usernameField: 'email',
			passwordField: 'password'    
		},
		function(email,password,done) {
			var user = password;
			user = bb(email,password,connection,done);		
		}
	));
	
	passport = ppt;
};
*/

var Passport = {
	
	a: 1,
	b: function (){var v = 1; this.t = 2;}
	
};


module.exports = Passport;
